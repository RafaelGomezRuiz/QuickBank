@using QuickBank.Core.Application.Interfaces.Helpers;
@using QuickBank.Core.Application.ViewModels.Products;

@inject IUserHelper userHelper

@model HomeAdminViewModel;
@{
    ViewData["Title"] = "Admin Home";
    // Current user logged
    var user = userHelper.GetUser();
}

<div class="container-fluid">
    <h1>Dashboard</h1>

    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h3>Transacciones</h3>
                <p><strong>Total de transacciones:</strong> @Model.TransferLogs</p>
                <p><strong>Transacciones del día:</strong> @Model.DailyTransferLogs</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <h3>Pagos</h3>
                <p><strong>Total de pagos:</strong> @Model.PayLogs </p>
                <p><strong>Pagos del día:</strong> @Model.DailyPayLogs</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <h3>Clientes</h3>
                <p><strong>Clientes activos:</strong> @Model.UsersActive</p>
                <p><strong>Clientes inactivos:</strong> @Model.UsersInactive</p>
            </div>
        </div>

        <!-- Row 4: Productos -->
        <div class="row">
            <div class="col-md-6">
                <h3>Productos</h3>
                <p><strong>Cantidad de productos asignados:</strong> @Model.ProductsAssigned</p>
            </div>
        </div>
    </div>
</div>



<!-- Botón para abrir el modal -->
<button type="button" id="openModalBtn" data-bs-toggle="modal" data-bs-target="#errorModal" hidden> a</button>

<!-- Modal -->
<div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="errorModalLabel">Error</h5>
                <button type="button" class="close-button" data-bs-dismiss="modal" aria-label="Close">x</button>
            </div>
            <div class="modal-body text-center">
                <i class="bi bi-x-octagon-fill fa-3x" style="color: red;"></i>
                <p class="mt-3" style="color: red; font-size: 1.25rem;">You cannot perform this action</p>
            </div>
        </div>
    </div>
</div>


<style>
    .close-button {
        background-color: #dc3545;
        border: none; 
        color: white;
        font-size: 2rem;
    }

    .modal-header.bg-danger {
        background-color: #dc3545;
    }

    .modal-body i {
        color: red;
    }

    .modal-body p {
        color: red;
        font-size: 1.25rem;
    }
</style>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Simular clic en el botón al cargar la página
        var openModalBtn = document.getElementById("openModalBtn");

        @if (ViewBag.LoginAccessDenied as bool? ?? false)
        {
            <text>openModalBtn.click(); </text>
        }
        
    });
</script>